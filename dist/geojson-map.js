!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.geoJsonMap=n():t.geoJsonMap=n()}(this,function(){return function(t){function n(e){if(o[e])return o[e].exports;var i=o[e]={exports:{},id:e,loaded:!1};return t[e].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var o={};return n.m=t,n.c=o,n.p="",n(0)}([function(t,n,o){function e(t,n){return new r(i(t),n)}var i=o(1),r=o(2);e.MERCATOR=0,t.exports=e},function(t,n){function o(t,n){for(var o,e,i=[],r=n.slice(),a=0,s=t.length;a<s;a+=2)o=t.charCodeAt(a)-64,e=t.charCodeAt(a+1)-64,o=(o>>1^-(1&o))+r[0],e=(e>>1^-(1&e))+r[1],r[0]=o,r[1]=e,i.push([o/1024,e/1024]);return i}function e(t){var n={MultiPolygon:function(t,n){for(var e=[],i=0,r=t.length;i<r;i++)e.push(o(t[i],n[i]));return e},Polygon:o},e=[];if("string"==typeof t&&(t=JSON.parse(t)),e=t.features,!t.UTF8Encoding)return t;for(var i=0,r=e.length;i<r;i++){var a=e[i].geometry,s=a.coordinates,c=a.encodeOffsets;s.forEach(function(t,o){s[o]=n[a.type](t,c[o])})}return t.UTF8Encoding=!1,t}function i(t,n,o){if(this.name=t,this.contours=n,!o){var e=this.getBoundingRect();o=[(e.xMin+e.xMax)/2,(e.yMin+e.yMax)/2]}this.center=o}i.prototype.getBoundingRect=function(){for(var t=Number.MAX_VALUE,n=function(n){var o=[t,t],e=[-t,-t];return n.forEach(function(t){o[0]=Math.min(o[0],t[0]),e[0]=Math.max(e[0],t[0]),o[1]=Math.min(o[1],t[1]),e[1]=Math.max(e[1],t[1])}),{xMin:o[0],yMin:o[1],xMax:e[0],yMax:e[1]}},o={xMin:t,yMin:t,xMax:-t,yMax:-t},e=0,i=this.contours.length;e<i;e++){var r=n(this.contours[e]);o.xMin=Math.min(o.xMin,r.xMin),o.xMax=Math.max(o.xMax,r.xMax),o.yMin=Math.min(o.yMin,r.yMin),o.yMax=Math.max(o.yMax,r.yMax)}return o},t.exports=function(t){var n=e(t),o=n.features.filter(function(t){return t.properties&&t.geometry&&t.geometry.coordinates.length>0});return o.map(function(t){var n=t.geometry,o=n.coordinates;return console.log(o.slice()),"MultiPolygon"===n.type&&o.forEach(function(t,n){for(var e=o[n]=[],i=0,r=t.length;i<r;i++)for(var a=0,s=t[i].length;a<s;a++)e.push(t[i][a])}),new i(t.properties.name,o,t.properties.cp)})}},function(t,n,o){function e(t,n){this.regions=[],this.options={},this.markers={centers:[],customs:[]},this.context=n.el.getContext("2d"),Object.assign(this.options,n,{projection:new i(n.projection.type,{zoom:n.projection.zoom,width:n.el.width,height:n.el.height}),regions:t});for(var o=this.getBoundingRect(),e=this.options.projection,r=0,a=t.length;r<a;r++){var s={name:t[r].name,contours:[]},c=t[r].contours;s.center=e.coordinateToPoint(t[r].center,o),this.markers.centers.push(s.center),c.forEach(function(t){var n=[];t.forEach(function(t){n.push(e.coordinateToPoint(t,o))}),s.contours.push(n)}),this.regions.push(s)}}var i=o(3);e.prototype.render=function(){var t=this.regions,n=this.context;n.strokeStyle="black",t.forEach(function(t){t.contours.forEach(function(t,o){n.beginPath(),n.moveTo(t[0].x,t[0].y);for(var e=1,i=t.length;e<i;e++)n.lineTo(t[e].x,t[e].y);n.stroke()})}),this.options.showMarker&&(n.fillStyle="blue",this.markers.centers.forEach(function(t){n.beginPath(),n.arc(t.x,t.y,2,0,2*Math.PI),n.fill()}),this.markers.customs.forEach(function(t){n.beginPath(),n.arc(t.x,t.y,2,0,2*Math.PI),n.fill()}))},e.prototype.resize=function(t,n){},e.prototype.getBoundingRect=function(){for(var t,n,o=Number.MAX_VALUE,e=this.options.regions,i=this.options.projection.projection,r={xMin:o,yMin:o,xMax:-o,yMax:-o},a=0,s=e.length;a<s;a++){var c=e[a].getBoundingRect();t=i([c.xMin,c.yMin]),n=i([c.xMax,c.yMax]),r.xMin=r.xMin<t.x?r.xMin:t.x,r.yMin=r.yMin<t.y?r.yMin:t.y,r.xMax=r.xMax>n.x?r.xMax:n.x,r.yMax=r.yMax>n.y?r.yMax:n.y}return r},t.exports=e},function(t,n){function o(t,n){this.projection=e[t],this.options=Object.assign({zoom:0,width:0,height:0},n)}var e={};o.MERCATOR=0,o.prototype.projectCoordinate=function(t){var n=this.projection(t),o=Math.pow(2,parseInt(this.options.zoom,10));return n.x=n.x*o,n.y=n.y*o,n},o.prototype.coordinateToPoint=function(t,n){var o=this.projectCoordinate(t),e=Math.abs(n.xMax-n.xMin),i=Math.abs(n.yMax-n.yMin),r=this.options.width/e,a=this.options.height/i;return r<a?(o.x=(o.x-n.xMin)*r,o.y=(n.yMax-o.y)*r,o.y+=(this.options.height-i*r)/2):(o.x=(o.x-n.xMin)*a,o.x+=(this.options.width-e*a)/2,o.y=(n.yMax-o.y)*a),o},e[o.MERCATOR]=function(t,n){var o={};return n=Object.assign({radius:6378137,max:85.0511287798,radians:Math.PI/180},n),o.x=n.radius*t[0]*n.radians,o.y=Math.max(Math.min(n.max,t[1]),-n.max),o.y=o.y*n.radians,o.y=n.radius*Math.log(Math.tan(Math.PI/4+o.y/2)),o},t.exports=o}])});